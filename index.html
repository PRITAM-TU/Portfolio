<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preload" href="critical.css" as="style">
  <link rel="preload" href="main.js" as="script">

  <!-- Font Awesome for more icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="script.js" defer></script>
  <script src="analytics.js" async></script>
  <link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'">
  <link rel="dns-prefetch" href="//cdn.example.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Liter&family=Parkinsans:wght@300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Wet+Paint&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Liter&family=National+Park:wght@200..800&family=Parkinsans:wght@300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Wet+Paint&display=swap" rel="stylesheet">
  
  <!-- Animate.css for additional animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    // Initialize AOS
    AOS.init({
      offset: 100,
      duration: 800,
      easing: 'ease-in-out',
      once: false
    });

    // Loading screen
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.querySelector('.loading-screen').classList.add('fade-out');
        setTimeout(function() {
          document.querySelector('.loading-screen').style.display = 'none';
        }, 500);
      }, 1500);
    });

    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleMobile = document.getElementById('theme-toggle-mobile');
    const icon = document.getElementById('icon');
    
    function toggleTheme() {
      document.body.classList.toggle('dark-theme');
      if (document.body.classList.contains('dark-theme')) {
        icon.src = "sun.png";
        localStorage.setItem('theme', 'dark');
      } else {
        icon.src = "moon.png";
        localStorage.setItem('theme', 'light');
      }
    }
    
    themeToggle.addEventListener('click', toggleTheme);
    themeToggleMobile.addEventListener('click', toggleTheme);
    
    // Check for saved theme preference
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.body.classList.add('dark-theme');
      icon.src = "sun.png";
    }

    // Mobile navigation toggle
    document.getElementById('nav-toggle').addEventListener('click', function() {
      const navMobile = document.getElementById('nav-mobile');
      navMobile.classList.toggle('hidden');
      this.classList.toggle('active');
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
          
          // Close mobile menu if open
          const navMobile = document.getElementById('nav-mobile');
          if (!navMobile.classList.contains('hidden')) {
            navMobile.classList.add('hidden');
          }
        }
      });
    });

    // Back to top button
    const backToTopButton = document.getElementById('back-to-top');
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        backToTopButton.classList.remove('hidden');
      } else {
        backToTopButton.classList.add('hidden');
      }
    });
    
    backToTopButton.addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Initialize particles.js
    particlesJS('particles-js', {
      "particles": {
        "number": {
          "value": 80,
          "density": {
            "enable": true,
            "value_area": 800
          }
        },
        "color": {
          "value": "#3b82f6"
        },
        "shape": {
          "type": "circle",
          "stroke": {
            "width": 0,
            "color": "#000000"
          },
          "polygon": {
            "nb_sides": 5
          }
        },
        "opacity": {
          "value": 0.3,
          "random": false,
          "anim": {
            "enable": false,
            "speed": 1,
            "opacity_min": 0.1,
            "sync": false
          }
        },
        "size": {
          "value": 3,
          "random": true,
          "anim": {
            "enable": false,
            "speed": 40,
            "size_min": 0.1,
            "sync": false
          }
        },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#3b82f6",
          "opacity": 0.2,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 2,
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "bounce": false,
          "attract": {
            "enable": false,
            "rotateX": 600,
            "rotateY": 1200
          }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {
            "enable": true,
            "mode": "grab"
          },
          "onclick": {
            "enable": true,
            "mode": "push"
          },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 140,
            "line_linked": {
              "opacity": 1
            }
          },
          "bubble": {
            "distance": 400,
            "size": 40,
            "duration": 2,
            "opacity": 8,
            "speed": 3
          },
          "repulse": {
            "distance": 200,
            "duration": 0.4
          },
          "push": {
            "particles_nb": 4
          },
          "remove": {
            "particles_nb": 2
          }
        }
      },
      "retina_detect": true
    });

    // Form submission
    const contactForm = document.querySelector('#contact form');
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;
        
        // Show loading state
        submitButton.disabled = true;
        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Sending...';
        
        fetch(this.action, {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            submitButton.innerHTML = '<i class="fas fa-check mr-2"></i> Message Sent!';
            this.reset();
          } else {
            submitButton.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i> Error!';
          }
        })
        .catch(error => {
          submitButton.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i> Error!';
        })
        .finally(() => {
          setTimeout(() => {
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;
          }, 3000);
        });
      });
    }
  </script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const cursor = document.createElement('div');
        cursor.classList.add('cursor-trail');
        document.body.appendChild(cursor);
        
        // Construction-themed colors (orange, yellow, white)
        const colors = ['#FFA500', '#FFFF00', '#FFFFFF', '#FFD700', '#FF8C00'];
        
        // Track mouse position
        let mouseX = 0;
        let mouseY = 0;
        
        // Particles array
        const particles = [];
        
        // Follow mouse movement
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            // Update cursor position
            cursor.style.left = `${mouseX}px`;
            cursor.style.top = `${mouseY}px`;
            
            // Create smoke particles
            createSmoke();
        });
        
        function createSmoke() {
            // Create new particle
            const particle = document.createElement('div');
            particle.classList.add('smoke-particle');
            
            // Random size
            const size = Math.random() * 15 + 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            // Random construction color
            const color = colors[Math.floor(Math.random() * colors.length)];
            particle.style.background = color;
            
            // Initial position at cursor
            particle.style.left = `${mouseX}px`;
            particle.style.top = `${mouseY}px`;
            
            document.body.appendChild(particle);
            
            // Add to particles array
            particles.push({
                element: particle,
                x: mouseX,
                y: mouseY,
                size: size,
                speedX: Math.random() * 4 - 2,
                speedY: Math.random() * -3 - 1,
                opacity: 0.7,
                life: 100
            });
            
            // Remove old particles if too many
            if (particles.length > 50) {
                const oldParticle = particles.shift();
                if (oldParticle.element.parentNode) {
                    oldParticle.element.parentNode.removeChild(oldParticle.element);
                }
            }
        }
        
        // Animate particles
        function animateParticles() {
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                
                // Update position
                p.x += p.speedX;
                p.y += p.speedY;
                
                // Apply gravity
                p.speedY += 0.05;
                
                // Reduce opacity and life
                p.opacity -= 0.01;
                p.life--;
                
                // Update element
                p.element.style.left = `${p.x}px`;
                p.element.style.top = `${p.y}px`;
                p.element.style.opacity = p.opacity;
                
                // Remove dead particles
                if (p.life <= 0) {
                    p.element.parentNode.removeChild(p.element);
                    particles.splice(i, 1);
                    i--;
                }
            }
            
            requestAnimationFrame(animateParticles);
        }
        
        // Start animation
        animateParticles();
    });
</script>
  </body>
  
</html>
